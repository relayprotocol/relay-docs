---
title: Calling
description: How to implement Calling (executing crosschain transactions)
---

### Summary
<Steps>
  <Step title="Fetch the Price">
    <a href="#fetch-the-price" style={{position: 'absolute', top:10, left: 10,right:10, bottom:10, borderBottom: 0}}></a>
    This optional step is quicker than fetching an executable quote but invaluable when crafting a snappy user experience. In this step we'll fetch the price to display a quote preview to the user. This can be skipped if the call is on the server without user interaction.
  </Step>
  <Step title="Fetch the Quote">
    <a href="#fetch-the-quote" style={{position: 'absolute', top:10, left: 10,right:10, bottom:10, borderBottom: 0}}></a>
    In this step we'll fetch a full quote that expires after 30s. It will be a complete quote with all the details required to execute it.
  </Step>
  <Step title="Execute the Quote">
    <a href="#execute-the-quote" style={{position: 'absolute', top:10, left: 10,right:10, bottom:10, borderBottom: 0}}></a>
    Once we have the quote all that's left to do is execute the quote and display a progress state to the user.
  </Step>
</Steps>

### Contract Compatability

Before we begin it's important to ensure that a contract is compatible with Relay. Please review our [contract compatability](/how-it-works/contract-compatibility.mdx) overview to make any necessary changes.


## Fetch the Price

The Price is a lightweight quote, excluding steps and calldata but it includes a preview of what the full quote might contain. Prices are subject to change once you get the quote so you should handle price changes accordingly.
Once you determine where the user wants to call the contract from and where the contract has been deployed to, and their preferred payment currency then you can pass everything into the [getPrice](/references/sdk/actions/getPrice) or the [usePrice](/references/relay-kit/hooks/usePrice) hook depending on if you're using the sdk or the ui hooks. Note that for calling a contract across chains you'll need to provide three key pieces of information in addition to the usual data required to call:
* **tradeType** must be `EXACT_OUTPUT`
* **txs** can either be an array of `to`, `data` and `value` or it can be the response from viem's [simulateContract](https://viem.sh/docs/contract/simulateContract) method. You can see an example below of how this is done
* **amount** must be the sum of all the txs values

<CodeGroup>
```typescript sdk
import { getClient } from '@reservoir0x/relay-sdk'
import { useAccount } from 'wagmi'

const { address } = useAccount()

const CONTRACT_ADDRESS = "0xabc" //Replace with your contract address
const CALL_DATA = "0x" // Replace with your calldata

const price = await getClient()?.actions.getPrice({
  user: address
  originChainId: 1, // The chain id to call from
  destinationChainId: 7777777, // The chain id to call to
  amount: '100000000000000000', // Total value of txs
  originCurrency: '0x0000000000000000000000000000', // ERC20 Address
  destinationCurrency: '0x0000000000000000000000000000', // ERC20 Address
  tradeType: 'EXACT_OUTPUT',
  txs: [{
    to: CONTRACT_ADDRESS,
    value: "100000000000000000", //Must match the amount property
    data: CALL_DATA
  }]
})
```
```typescript sdk simulateContract
import { getClient } from '@reservoir0x/relay-sdk'
import { useAccount, http, createPublicClient } from 'wagmi'
import { zora } from 'viem/chains'

const account = useAccount()

const CONTRACT_ADDRESS = "0xabc" //Replace with your contract address
const CONTRACT_ABI = {} //Replace with your contract abi

const publicClient = createPublicClient({ 
  chain: zora,
  transport: http()
})
 
const { request } = await publicClient.simulateContract({
  address: CONTRACT_ADDRESS,
  abi: CONTRACT_ABI,
  functionName: 'mint',
  account,
})

const price = await getClient()?.actions.getPrice({
  user: account.address
  originChainId: 1, // The chain id to call from
  destinationChainId: 7777777, // The chain id to call to
  amount: '100000000000000000', // Total value of txs
  originCurrency: '0x0000000000000000000000000000', // ERC20 Address
  destinationCurrency: '0x0000000000000000000000000000', // ERC20 Address
  tradeType: 'EXACT_OUTPUT',
  txs: [request]
})
```
```typescript hooks
import { usePrice } from '@reservoir0x/relay-kit-hooks'
import { useAccount } from 'wagmi'

const { address } = useAccount()

const CONTRACT_ADDRESS = "0xabc" //Replace with your contract address
const CALL_DATA = "0x" // Replace with your calldata

const {    
  data: price,
  isLoading,
  error,
  executeQuote } = usePrice(relayClient, {
  user: address
  originChainId: 1, // The chain id to call from
  destinationChainId: 7777777, // The chain id to call to
  amount: '100000000000000000', // Total value of txs
  originCurrency: '0x0000000000000000000000000000', // ERC20 Address
  destinationCurrency: '0x0000000000000000000000000000', // ERC20 Address
  tradeType: 'EXACT_OUTPUT',
  txs: [{
    to: CONTRACT_ADDRESS,
    value: "100000000000000000", //Must match the amount property
    data: CALL_DATA
  }]
})
```
```typescript hooks simulateContract
import { usePrice } from '@reservoir0x/relay-kit-hooks'
import { useAccount } from 'wagmi'

const { address } = useAccount()

const CONTRACT_ADDRESS = "0xabc" //Replace with your contract address
const CONTRACT_ABI = {} //Replace with your contract abi

const publicClient = createPublicClient({ 
  chain: zora,
  transport: http()
})
 
const { request } = await publicClient.simulateContract({
  address: CONTRACT_ADDRESS,
  abi: CONTRACT_ABI,
  functionName: 'mint',
  account,
})

const {    
  data: price,
  isLoading,
  error,
  executeQuote } = usePrice(relayClient, {
  user: address
  originChainId: 1, // The chain id to call from
  destinationChainId: 7777777, // The chain id to call to
  amount: '100000000000000000', // Total value of txs
  originCurrency: '0x0000000000000000000000000000', // ERC20 Address
  destinationCurrency: '0x0000000000000000000000000000', // ERC20 Address
  tradeType: 'EXACT_OUTPUT',
  txs: [request]
})
```
</CodeGroup>

## Fetch the Quote

If you followed the previous step, you can pass that same data into the [getQuote](/references/sdk/actions/getQuote) action or [useQuote](/references/relay-kit/hooks/useQuote) hook. You'll still need to meet the requirements for `tradeType`, `amount` and `txs`, refer to the previous step for more details.

<CodeGroup>
```typescript sdk
import { getClient } from '@reservoir0x/relay-sdk'
import { useWalletClient } from 'wagmi'

const { data: wallet } = useWalletClient()

const CONTRACT_ADDRESS = "0xabc" //Replace with your contract address
const CALL_DATA = "0x" // Replace with your calldata

const quote = await getClient()?.actions.getQuote({
  wallet,
  chainId: 1, // The chain id to call from
  toChainId: 7777777, // The chain id to call to
  amount: '100000000000000000', // Total value of txs
  currency: '0x0000000000000000000000000000', // ERC20 Address
  toCurrency: '0x0000000000000000000000000000', // ERC20 Address
  tradeType: 'EXACT_OUTPUT',
  txs: [{
    to: CONTRACT_ADDRESS,
    value: "100000000000000000", //Must match the amount property
    data: CALL_DATA
  }]
})
```
```typescript sdk simulateContract
import { getClient } from '@reservoir0x/relay-sdk'
import { useWalletClient } from 'wagmi'

const { data: wallet } = useWalletClient()

const CONTRACT_ADDRESS = "0xabc" //Replace with your contract address
const CONTRACT_ABI = {} //Replace with your contract abi

const publicClient = createPublicClient({ 
  chain: zora,
  transport: http()
})
 
const { request } = await publicClient.simulateContract({
  address: CONTRACT_ADDRESS,
  abi: CONTRACT_ABI,
  functionName: 'mint',
  account,
})


const quote = await getClient()?.actions.getQuote({
  wallet,
  chainId: 1, // The chain id to call from
  toChainId: 7777777, // The chain id to call to
  amount: '100000000000000000', // Total value of txs
  currency: '0x0000000000000000000000000000', // ERC20 Address
  toCurrency: '0x0000000000000000000000000000', // ERC20 Address
  tradeType: 'EXACT_OUTPUT',
  txs: [request]
})
```
```typescript hooks
import { useQuote, useRelayClient } from '@reservoir0x/relay-kit-hooks'
import { useWalletClient } from 'wagmi'

const { data: wallet } = useWalletClient()
const relayClient = useRelayClient()

const CONTRACT_ADDRESS = "0xabc" //Replace with your contract address
const CALL_DATA = "0x" // Replace with your calldata

const {    
  data: quote,
  isLoading,
  error,
  executeQuote } = useQuote(relayClient, wallet, {
  originChainId: 1, // The chain id to call from
  destinationChainId: 8453, // The chain id to call to
  amount: '100000000000000000', // Total value of txs
  originCurrency: '0x0000000000000000000000000000', // ERC20 Address
  destinationCurrency: '0x0000000000000000000000000000', // ERC20 Address
  tradeType: 'EXACT_OUTPUT',
    txs: [{
    to: CONTRACT_ADDRESS,
    value: "100000000000000000", //Must match the amount property
    data: CALL_DATA
  }]
})
```
```typescript hooks simulateContract
import { useQuote, useRelayClient } from '@reservoir0x/relay-kit-hooks'
import { useWalletClient } from 'wagmi'

const { data: wallet } = useWalletClient()
const relayClient = useRelayClient()

const CONTRACT_ADDRESS = "0xabc" //Replace with your contract address
const CONTRACT_ABI = {} //Replace with your contract abi

const publicClient = createPublicClient({ 
  chain: zora,
  transport: http()
})
 
const { request } = await publicClient.simulateContract({
  address: CONTRACT_ADDRESS,
  abi: CONTRACT_ABI,
  functionName: 'mint',
  account,
})

const {    
  data: quote,
  isLoading,
  error,
  executeQuote } = useQuote(relayClient, wallet, {
  originChainId: 1, // The chain id to call from
  destinationChainId: 8453, // The chain id to call to
  amount: '100000000000000000', // Total value of txs
  originCurrency: '0x0000000000000000000000000000', // ERC20 Address
  destinationCurrency: '0x0000000000000000000000000000', // ERC20 Address
  tradeType: 'EXACT_OUTPUT',
  txs: [request]
})
```
</CodeGroup>

In the above example, we fetch the quote to call a Zora contract from Mainnet Ethereum. In the quote object we'll get data on the fees required to do this call. You can learn more about fees [here](/how-it-works/fees). You'll see that we provided an amount that matches the sum of the txs, that the tradeType is `EXACT_OUTPUT` and that we passed in a valid txs array.

**Note** - Quotes can go stale after 30 seconds. Clients should regularly fetch fresh quotes so that users are always submitting valid transactions. [Learn more](/how-it-works/the-reservoir-relayer#getting-a-quote) about Relay quotes.

## Execute the Quote

After getting the quote all that's left is to execute the quote and render the progress to the user. Follow the code snippets below to execute the quote:

<CodeGroup>
```typescript sdk
import { getClient } from '@reservoir0x/relay-sdk'
import { useWalletClient } from 'wagmi'

const { data: wallet } = useWalletClient()

const quote = await getClient()?.actions.getQuote({
  ...options
})

await getClient()?.actions.execute({
  quote,
  wallet,
  onProgress: (steps, currentStep, currentStepItem, fees, details, txHashes) => {
    console.log(steps, currentStep, currentStepItem, fees, details, txHashes)
  }
})
```
```typescript hooks
import { getClient } from '@reservoir0x/relay-sdk'
import { useWalletClient } from 'wagmi'

const { data: wallet } = useWalletClient()

const {    
  data: quote,
  isLoading,
  error,
  executeQuote } = useQuote({ ... })

//Put this code somewhere in your ui
<button onClick={() => {
  executeQuote(({steps, currentStep, currentStepItem, fees, details, txHashes}) => {
    console.log(steps, currentStep, currentStepItem, fees, details, txHashes)
  })
}}>
```
</CodeGroup>

While the quote is being executed if you're rendering the quote in an interface you may want to display progress to the user. There's a provided progress callback to get the updated state of execution. Learn more about the progress state [here](/references/sdk/actions/execute#handling-onprogress-updates).

### Preflight Checklist

☐ Verify that the user has enough balance on the origin chain to cover the full txs amount + fees. Check out our [fees](/how-it-works/fees) doc for more details on calculating the fees.<br/>
☐ Have the Relay SDK set up and the Relay hooks package installed if applicable <br/>
☐ Ensure the user is on the correct chain (it should match the chainId you get the quote from)<br/>
☐ Handle any errors that may come about<br/>
☐ Render the progress of the execution to provide a best in class user experience<br/>