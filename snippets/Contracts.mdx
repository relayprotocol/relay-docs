import React from 'react'

export const Contracts = ({ env, id }) => {
  if (typeof document === "undefined") {
    return null;
  } else {
    setTimeout(() => {
      const tbody = document.getElementById(id);
      const theader = document.getElementById(`${id}Theader`);
      fetch(env === "testnets" ? "https://api.testnets.relay.link/chains" : "https://api.relay.link/chains")
        .then((response) => response.json())
        .then((response) => {
          console.log(response)

          let tableRows = response.chains
            .sort((a, b) => a.displayName.localeCompare(b.displayName))
            .map((chain) => {
              return `
                <tr>
                  <td style="text-transform: capitalize">${chain.displayName}</td>
                  <td>${chain.id}</td>
                  <td>{chain.contracts.relayReceiver > 0 ? "N/A" : "N/A"}</td>
          <td>{chain.contracts.erc20Router > 0 ? "N/A" : "N/A"}</td>
          <td>{chain.contracts.approvalProxy > 0 ? "N/A" : "N/A"}</td>
                </tr>
              `;
            }).join("");

      console.log(tableRows)
          tbody.innerHTML = tableRows;
        });
    }, 1);

}

return (

<table style={{ width: "100%", borderSpacing: "48px" }} className="relay-table">
  <thead
    style={{
      borderBottom: "1px solid rgb(227 226 230)",
      paddingBottom: 5,
      width: "100%",
      fontSize: 16,
    }}
  >
    <tr
      id={`${id}Theader`}
      style={{
        textAlign: "left",
      }}
    >
      <th>Chain Name</th>
      <th>Chain ID</th>
      <th>RelayReceiver</th>
      <th>ERC20Router</th>
      <th>ApprovalProxy</th>
    </tr>
  </thead>
  <tbody id={id}></tbody>
</table>
); };
