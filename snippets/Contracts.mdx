import React, { useState, useEffect } from 'react'

export const Contracts = ({ env, id }) => {
  const [chainData, setChainData] = useState([]);

useEffect(() => {
const fetchContracts = async () => {
try {
const response = await fetch(
env === "testnets"
? "https://api.testnets.relay.link/chains"
: "https://api.relay.link/chains"
);
const data = await response.json();
setChainData(data.chains);
} catch (error) {
console.error('Error fetching chain data:', error);
}
};

    fetchContracts();

}, [env]);

if (typeof window === "undefined") {
return null;
}

return (

<table style={{ width: "100%", borderSpacing: "48px" }} className="relay-table">
  <thead
    style={{
      borderBottom: "1px solid rgb(227 226 230)",
      paddingBottom: 5,
      width: "100%",
      fontSize: 16,
    }}
  >
    <tr style={{ textAlign: "left" }}>
      <th>Chain Name</th>
      <th>Chain ID</th>
      <th>Supported Tokens</th>
      <th>Deposit Fee</th>
      <th>Withdrawal Fee</th>
    </tr>
  </thead>
  <tbody>
    {chainData
      .sort((a, b) => a.displayName.localeCompare(b.displayName))
      .map((chain) => {
        const dexes = chainToDexMap[chain.id]?.dexes.join(", ") || "";
        return (
          <tr key={chain.id}>
            <td style={{ textTransform: "capitalize" }}>{chain.displayName}</td>
            <td>{chain.id}</td>
            <td>{dexes.length > 0 ? "All" : "Limited"}</td>
            <td>{chain.depositFee / 100}%</td>
            <td>{chain.withdrawalFee / 100}%</td>
          </tr>
        );
      })}
  </tbody>
</table>
); };
